(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{101:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){"use strict";a.r(t);var n=a(3),c=a(0),r=a.n(c),s=a(17),i=a.n(s),o=(a(82),a(83),a(10)),u=a.n(o),d=a(18),l=a(21),p=a(24),b=a.n(p),j=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b()({url:"https://routine-cvs.herokuapp.com/"+"dailies/".concat(t),method:"GET"});case 2:if(!(200!==(a=e.sent).status&201!==a.status)){e.next=5;break}throw new Error("Error!");case 5:return e.next=7,a.data;case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b()({url:"https://routine-cvs.herokuapp.com/activity",method:"GET"});case 2:if(!(200!==(t=e.sent).status&201!==t.status)){e.next=5;break}throw new Error("Error!");case 5:return e.next=7,t.data;case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=(a(101),a.p+"static/media/teeth.1aa6b881.svg"),h=a.p+"static/media/guitar.c3922c9c.svg",f=a.p+"static/media/producing.a9835c6a.svg",y=a.p+"static/media/trumpet.a799638f.svg",O=a.p+"static/media/piano.fa43c86a.svg",g=a.p+"static/media/bass.35a36137.svg",x=a.p+"static/media/dutch.0d45338e.svg",w=a.p+"static/media/javascript.79934a25.svg",k=a.p+"static/media/situps.260199dc.svg",_=a.p+"static/media/pushups.82e7b7a9.svg",E=a.p+"static/media/pullups.2353a6a1.svg",N=a.p+"static/media/code.2aff3c3a.svg",C=a.p+"static/media/run.eee4c3df.svg",F=a.p+"static/media/stretch.22bae108.svg",B=a.p+"static/media/photo.8d6ce4c2.svg",S=a.p+"static/media/water.a1b4f75b.svg",L=a.p+"static/media/climb.936e7285.svg",I=function(e){var t="";switch(e.activity.activity){case"teeth":t=m;break;case"guitar":t=h;break;case"bass":t=g;break;case"trumpet":t=y;break;case"piano":t=O;break;case"dutch":t=x;break;case"javascript":t=w;break;case"producing":t=f;break;case"situps":t=k;break;case"pushups":t=_;break;case"pullups":t=E;break;case"code":t=N;break;case"run":t=C;break;case"stretch":t=F;break;case"photo":t=B;break;case"water":t=S;break;case"climb":t=L;break;default:t=null}return Object(n.jsx)("div",{children:Object(n.jsx)("img",{className:"logo",src:t,alt:e.activity.activity})})},T=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n,c,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,a=t.getFullYear(),n=t.getMonth()+1,c=t.getDate(),e.next=6,b()({url:"https://routine-cvs.herokuapp.com/"+"streak/".concat(a,"/").concat(n,"/").concat(c),method:"GET"});case 6:if(!(200!==(r=e.sent).status&201!==r.status)){e.next=9;break}throw new Error("Error!");case 9:return e.next=11,r.data[0];case 11:return s=e.sent,e.abrupt("return",s);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=(a(102),function(e){var t=Object(c.useState)([]),a=Object(l.a)(t,2),r=a[0],s=a[1],i=Object(c.useState)(!0),o=Object(l.a)(i,2),p=o[0],b=o[1],j=e.activity.activity,v=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T();case 3:t=e.sent,s(t),b(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){v()}),[]);var m;return p?Object(n.jsx)("div",{className:"Streak__Main",children:"?"}):r[j]?Object(n.jsx)("div",{className:"Streak__Main",style:{backgroundColor:"rgba(214, 137, 16, ".concat((m=r[j],m<2?.1:m<3?.2:m<5?.3:m<8?.4:m<12?.5:m<20?.55:m<30?.6:m<40?.65:m<50?.7:m<60?.75:m<70?.8:m<80?.85:m<99?.9:1),")")},children:r[j]>999?"999+":r[j]}):Object(n.jsx)(n.Fragment,{})}),R=a(111),Y=a(113),D=a(112),P=a(75),A=a(114),H=a(73),G=a(110),z=a(60),J=function(){var e=Object(d.a)(u.a.mark((function e(t,a,n){var c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(z.a)({},a,n),e.prev=1,e.next=4,b()({url:"https://routine-cvs.herokuapp.com/"+"daily/".concat(t),method:"PATCH",data:c});case 4:if(200===(r=e.sent).status||201===r.status){e.next=7;break}throw new Error("Error!");case 7:return e.abrupt("return",{status:r.status,message:r.error});case 10:return e.prev=10,e.t0=e.catch(1),console.log(e.t0.message),e.abrupt("return",{status:500,message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a,n){return e.apply(this,arguments)}}(),q=(a(103),function(e){var t=Object(c.useState)(!1),a=Object(l.a)(t,2),r=a[0],s=a[1],i=Object(c.useState)(!1),o=Object(l.a)(i,2),p=o[0],b=o[1],j=Object(c.useState)(e.dailies[e.activity.activity]?e.dailies[e.activity.activity]:0),v=Object(l.a)(j,2),m=v[0],h=v[1],f=e.dailies.id,y=e.activity.activity,O=e.activity.increment,g=e.activity.goal,x=m>=g&&(!!g||m>g),w=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),b(!1),t=m+O,e.next=5,J(f,y,t);case 5:200===(a=e.sent).status?(h(t),s(!1)):(H.a.error({message:a.message}),b(!0));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),b(!1),t=m>=O?m-O:0,e.next=5,J(f,y,t);case 5:200===(a=e.sent).status?(h(t),s(!1)):(H.a.error({message:a.message}),b(!0));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)(G.a,{placement:"top",title:Object(n.jsxs)(n.Fragment,{children:[e.activity.name," ",Object(n.jsx)(M,{activity:e.activity})]}),children:Object(n.jsxs)("div",{className:"daily__item",children:[!g&&!x&&Object(n.jsx)("div",{className:"daily__optional"}),x&&Object(n.jsx)("div",{className:"daily__doneContainer",children:Object(n.jsx)("div",{className:"daily__done",children:Object(n.jsx)(R.a,{})})}),Object(n.jsx)("div",{className:"daily__actionContainer ".concat(0===g||e.disabled?"":"daily__actionContainerHover"),onMouseOver:function(){e.disabled||(g>1?(document.getElementById(y+"_minus").style.display="block",document.getElementById(y+"_plus").style.display="block"):document.getElementById(y+"_check").style.display="block")},onMouseLeave:function(){e.disabled||(g>1?(document.getElementById(y+"_minus").style.display="none",document.getElementById(y+"_plus").style.display="none"):document.getElementById(y+"_check").style.display="none")},children:g>1?Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"daily__action",id:y+"_minus",onClick:k,children:Object(n.jsx)(Y.a,{})}),Object(n.jsx)("div",{className:"daily__action",id:y+"_plus",onClick:w,children:Object(n.jsx)(D.a,{})})]})}):x?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{className:"daily__action",id:y+"_check",onClick:k,children:Object(n.jsx)(P.a,{})})}):Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{className:"daily__action",id:y+"_check",onClick:w,children:Object(n.jsx)(R.a,{})})})}),Object(n.jsx)(I,{activity:e.activity}),Object(n.jsxs)("div",{className:"daily__text }",children:[p?Object(n.jsx)(P.a,{style:{color:"#C70039"}}):r?Object(n.jsxs)(n.Fragment,{children:[g>1?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(A.a,{spin:!0,style:{color:"#999"}})," / ",g," "]}):Object(n.jsx)(A.a,{spin:!0,style:{color:"#999"}}),g>1&&e.activity.unit]}):Object(n.jsxs)(n.Fragment,{children:[g>1?"".concat(m," / ").concat(g," "):"".concat(e.activity.unit,"!"),g>1&&e.activity.unit]}),0===g&&Object(n.jsx)("div",{style:{fontStyle:"italic",fontSize:".7em"},children:Object(n.jsx)("i",{children:"optional"})})]})]})})}),K=(a(106),function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)([]),i=Object(l.a)(s,2),o=i[0],p=i[1],b=Object(c.useState)(!0),m=Object(l.a)(b,2),h=m[0],f=m[1],y=Object(c.useRef)(2),O=Object(c.useRef)(0),g=Object(c.useRef)(null),x=Object(c.useRef)(!1),w=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([j(t+1),v()]);case 3:a=e.sent,n=Object(l.a)(a,2),c=n[0],s=n[1],r(c),p(s),t+1>c.length&&(x.current=!0,g.current=O.current+1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0.message),H.a.error({message:e.t0.message});case 16:f(!1);case 17:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){w(y.current)}),[]),Object(c.useEffect)((function(){var e=function e(t){t.preventDefault(),document.removeEventListener("keydown",e);var a=t.key.toLowerCase();if("arrowdown"===a){if(g.current!==O.current-1){var n=O.current+1,c=document.getElementById("daily".concat(n)).getBoundingClientRect().top+window.scrollY;window.scrollTo({top:c,behavior:"smooth"})}if(!x.current){y.current++;var r=y.current;w(r)}}else if("arrowup"===a){if(O.current>0){var s=O.current-1,i=document.getElementById("daily".concat(s)).getBoundingClientRect().top+window.scrollY;window.scrollTo({top:i,behavior:"smooth"})}}else if("enter"===a){O.current=0;var o=document.getElementById("daily0").getBoundingClientRect().top+window.scrollY;window.scrollTo({top:o,behavior:"smooth"})}setTimeout((function(){document.addEventListener("keydown",e)}),50)},t=function(e){O.current=Math.round(window.scrollY/window.innerHeight),x.current||y.current===O.current+1&&(y.current=O.current+2,w(O.current+2))};return document.addEventListener("keydown",e),document.addEventListener("scroll",t),function(){window.removeEventListener("keydown",e),window.removeEventListener("scroll",t)}}),[]);for(var k=function(e){return o.map((function(t){return Object(n.jsx)(q,{activity:t,dailies:a[e],disabled:!!e},t.activity)}))},_=[],E=0;E<y.current;E++)_.push(Object(n.jsxs)("div",{className:"Dailies__full",id:"daily".concat(E),children:[Object(n.jsx)("div",{className:"dailies__date",children:a.length>0?Object(n.jsxs)("div",{children:[0===E&&"Today",1===E&&"Yesterday",E>1&&"".concat(a[E].day,".").concat(a[E].month,".").concat(a[E].year)]}):""}),Object(n.jsx)("div",{className:"dailies__main",children:k(E)})]},E));return h?Object(n.jsx)("div",{className:"spinner",children:Object(n.jsx)("img",{src:"https://avatars0.githubusercontent.com/u/12551446",className:"loader",alt:"Loading"})}):Object(n.jsx)(n.Fragment,{children:_})});window.addEventListener("resize",(function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}));var Q=function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)("header",{className:"App__header",children:Object(n.jsx)("div",{className:"App__day",children:Object(n.jsx)(K,{})})})})},U=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,115)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};i.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(Q,{})}),document.getElementById("root")),U()},82:function(e,t,a){},83:function(e,t,a){}},[[107,1,2]]]);
//# sourceMappingURL=main.963808f6.chunk.js.map