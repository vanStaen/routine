(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{227:function(e,t){e.exports=function(e,t,n){var r=new Date(e,t-1,n,0,0,0,0),c=new Date(r.valueOf()+864e5);return[c.getFullYear(),c.getMonth()+1,c.getDate()]}},242:function(e,t,n){},246:function(e,t){},248:function(e,t){},262:function(e,t){},264:function(e,t){},292:function(e,t){},294:function(e,t){},295:function(e,t){},300:function(e,t){},302:function(e,t){},321:function(e,t){},333:function(e,t){},336:function(e,t){},353:function(e,t,n){},371:function(e,t,n){},372:function(e,t,n){},373:function(e,t,n){},374:function(e,t,n){},378:function(e,t,n){},379:function(e,t,n){},380:function(e,t,n){},381:function(e,t,n){},449:function(e,t,n){},450:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(0),a=n.n(c),s=n(28),o=n.n(s),i=(n(242),n(22)),l=n(50),u=n(13),d=n.n(u),j=n(18),f=n(61),h=n(217),m=n(8),b=n(81),p=n.n(b),O=new(function(){function e(){var t=this;Object(f.a)(this,e),this.token=null,this.refreshToken=localStorage.getItem("refreshToken")||null,this.login=function(e,n){t.token=e,t.refreshToken=n},this.logout=function(){localStorage.removeItem("refreshToken"),localStorage.removeItem("userId"),localStorage.removeItem("user"),localStorage.clear();var e={refreshToken:t.refreshToken};t.token=null,t.refreshToken=null,fetch("https://routine-cvs.herokuapp.com/logout",{method:"DELETE",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){if(204!==e.status)throw new Error("Error when logout!")})).catch((function(e){console.log(e)}))},this.getNewToken=function(){var e=localStorage.getItem("refreshToken");if(e)try{p.a.decode(e,{complete:!0}),t.refreshToken=e}catch(r){r instanceof b.TokenExpiredError?(console.log("refreshtoken is expired",r),t.logout()):console.log("unknown error:",r)}if(null!==t.token)try{return p.a.decode(t.token,{complete:!0}),t.token}catch(r){r instanceof b.TokenExpiredError?(console.log("token is expired",r),t.logout()):console.log("unknown error:",r)}if(t.refreshToken){var n={refreshToken:t.refreshToken};return fetch("https://routine-cvs.herokuapp.com/token",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){if(201!==e.status)throw t.logout(),new Error("Error when refreshing the token!");return e.json()})).then((function(e){if(localStorage.setItem("refreshToken",e.refreshToken),e.token)return t.login(e.token,e.refreshToken),e.token})).catch((function(e){console.log(e)}))}},Object(m.m)(this,{_token:m.n,refreshToken:m.n,login:m.f,logout:m.f,getNewToken:m.f})}return Object(h.a)(e,[{key:"token",get:function(){return this._token},set:function(e){this._token=e}}]),e}()),v=new function e(){var t=this;Object(f.a)(this,e),this.userId=localStorage.getItem("userId")||null,this.userName=null,this.picUrl=null,this.setUserId=function(e){t.userId=e},this.setUserName=function(e){t.userName=e},this.setPicUrl=function(e){t.picUrl=e},Object(m.m)(this,{userId:m.n,setUserId:m.f,userName:m.n,setUserName:m.f,picUrl:m.n,setPicUrl:m.f})},x=(n(353),function(){return Object(r.jsxs)("div",{className:"spinner",children:[Object(r.jsx)("img",{src:"https://routine-cvs.herokuapp.com/images/venja.svg",className:"loader",alt:"Loading"}),Object(r.jsxs)("div",{className:"spinner spinner__header",children:["venja",Object(r.jsx)("span",{style:{color:"#D68910"},children:".org"})]})]})}),y=n(34),g=n.n(y),k=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g()({url:"https://routine-cvs.herokuapp.com/user",method:"GET"});case 2:if(!(200!==(t=e.sent).status&201!==t.status)){e.next=9;break}if(401!==t.status){e.next=8;break}throw new Error("Error! Unauthorized(401)");case 8:throw new Error("Error! Status ".concat(t.status));case 9:return e.next=11,t.data[0];case 11:return n=e.sent,v.setUserName(n.name),v.setPicUrl(n.picurl),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=(n(371),Object(l.a)((function(){var e=Object(c.useState)(!0),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)([]),o=Object(i.a)(s,2),l=o[0],u=o[1],f=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k();case 3:t=e.sent,u(t.activities),a(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){f()}),[]);var h=l.map((function(e){return Object(r.jsxs)(r.Fragment,{children:[e.activity," "]})}));return n?Object(r.jsx)(x,{}):Object(r.jsxs)("div",{className:"Profil__full",children:[Object(r.jsx)("div",{className:"Profil__title",children:"Profil"}),Object(r.jsx)("div",{className:"Profil__avatar",style:{backgroundImage:"url(".concat(v.picUrl,")"),backgroundSize:"cover"}}),Object(r.jsxs)("div",{className:"Profil__main",children:[Object(r.jsx)("br",{}),Object(r.jsxs)("div",{children:["hello ",v.userName,","]}),Object(r.jsx)("div",{className:"Profil__ActivitiesContainer",children:h}),Object(r.jsx)("div",{children:"Add activity"}),Object(r.jsx)("div",{children:"Manage Goal / increment"}),Object(r.jsx)("div",{children:"Edit activity title "}),Object(r.jsx)("div",{children:"Make optional/mandatory"}),Object(r.jsx)("br",{}),Object(r.jsx)("div",{className:"Profil__logout",onClick:function(){return O.logout()},children:"(logout)"})]})]})}))),w=n(231),N=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g()({url:"https://routine-cvs.herokuapp.com"+"/dailies/".concat(t),method:"GET"});case 2:if(!(200!==(n=e.sent).status&201!==n.status)){e.next=9;break}if(401!==n.status){e.next=8;break}throw new Error("Error! Unauthorized (401)");case 8:throw new Error("Error! Status ".concat(n.status));case 9:return e.next=11,n.data;case 11:return r=e.sent,e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g()({url:"https://routine-cvs.herokuapp.com/activity",method:"GET"});case 2:if(!(200!==(t=e.sent).status&201!==t.status)){e.next=9;break}if(401!==t.status){e.next=8;break}throw new Error("Error! Unauthorized (401)");case 8:throw new Error("Error! Status ".concat(t.status));case 9:return e.next=11,t.data;case 11:return n=e.sent,e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=(n(372),function(e){return Object(r.jsx)("div",{children:Object(r.jsx)("img",{className:"logo",src:"https://routine-cvs.herokuapp.com"+"/images/".concat(e.image,".svg"),alt:e.image})})}),S=function(){var e=Object(j.a)(d.a.mark((function e(t,n,r){var c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g()({url:"https://routine-cvs.herokuapp.com"+"/streak/".concat(t,"/").concat(n,"/").concat(r),method:"GET"});case 2:if(!(200!==(c=e.sent).status&201!==c.status)){e.next=5;break}throw new Error("Error!");case 5:return e.next=7,c.data[0];case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),I=new function e(){var t=this;Object(f.a)(this,e),this.today=null,this.dailyStreaks=null,this.setToday=function(e){t.today=e},this.setDailyStreaks=function(e){t.dailyStreaks=e},Object(m.m)(this,{today:m.n,setToday:m.f,dailyStreaks:m.n,setDailyStreaks:m.f})},P=(n(373),(new Date).getDate()),C=Object(l.a)((function(e){var t=Object(c.useState)(I.dailyStreaks),n=Object(i.a)(t,2),a=n[0],s=n[1],o=Object(c.useState)(!0),l=Object(i.a)(o,2),u=l[0],f=l[1],h=e.activity.activity,m=function(){var t=Object(j.a)(d.a.mark((function t(n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S(e.daily.year,e.daily.month,e.daily.day);case 3:r=t.sent,n&&(I.setToday(P),I.setDailyStreaks(r)),s(r),f(!1),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){null===a&&P===e.daily.day?m(!0):e.daily.day===I.today?(s(I.dailyStreaks),f(!1)):m(!1)}),[]);var b;return u?Object(r.jsx)("div",{className:"Streak__Main",children:"?"}):a[h]?Object(r.jsx)("div",{className:"Streak__Main",style:{backgroundColor:"rgba(214, 137, 16, ".concat((b=a[h],b<2?.1:b<3?.2:b<5?.3:b<8?.4:b<12?.5:b<20?.55:b<30?.6:b<40?.65:b<50?.7:b<60?.75:b<70?.8:b<80?.85:b<99?.9:1),")")},children:a[h]>999?"999+":a[h]}):Object(r.jsx)(r.Fragment,{})})),F=n(456),B=n(457),A=n(458),U=n(234),D=n(459),M=n(109),Y=n(455),z=n(218),R=function(){var e=Object(j.a)(d.a.mark((function e(t,n,r){var c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(z.a)({},n,r),e.prev=1,e.next=4,g()({url:"https://routine-cvs.herokuapp.com"+"/daily/".concat(t),method:"PATCH",data:c});case 4:if(200===(a=e.sent).status||201===a.status){e.next=7;break}throw new Error("Error!");case 7:return e.abrupt("return",{status:a.status,message:a.error});case 10:return e.prev=10,e.t0=e.catch(1),console.log(e.t0.message),e.abrupt("return",{status:500,message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),L=(n(374),function(e){var t=Object(c.useState)(!1),n=Object(i.a)(t,2),a=n[0],s=n[1],o=Object(c.useState)(!1),l=Object(i.a)(o,2),u=l[0],f=l[1],h=Object(c.useState)(e.dailies[e.activity.activity]?e.dailies[e.activity.activity]:0),m=Object(i.a)(h,2),b=m[0],p=m[1],O=e.dayFromToday,v=e.dailies.id,x=e.activity.activity,y=e.activity.increment,g=e.activity.goal,k=e.activity.optional,_=b>=g&&(!!g||b>g),N=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),f(!1),t=b+y,e.next=5,R(v,x,t);case 5:200===(n=e.sent).status?(p(t),s(!1)):(w.a.error({message:n.message}),f(!0));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),f(!1),t=b>=y?b-y:0,e.next=5,R(v,x,t);case 5:200===(n=e.sent).status?(p(t),s(!1)):(w.a.error({message:n.message}),f(!0));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)(M.a,{placement:"top",title:Object(r.jsxs)(r.Fragment,{children:[e.activity.desc," ",Object(r.jsx)(C,{activity:e.activity,daily:e.dailies})]}),children:Object(r.jsxs)("div",{className:"Activity__item",children:[k&&!_&&Object(r.jsx)("div",{className:"Activity__optional"}),_&&Object(r.jsx)("div",{className:"Activity__doneContainer",children:Object(r.jsx)("div",{className:"Activity__done",children:Object(r.jsx)(F.a,{})})}),Object(r.jsx)("div",{className:"Activity__actionContainer ".concat(0===g?"":"Activity__actionContainerHover"),onMouseOver:function(){O<2&&(g>1?(document.getElementById(x+O+"_minus").style.display="block",document.getElementById(x+O+"_plus").style.display="block"):document.getElementById(x+O+"_check").style.display="block")},onMouseLeave:function(){O<2&&(g>1?(document.getElementById(x+O+"_minus").style.display="none",document.getElementById(x+O+"_plus").style.display="none"):document.getElementById(x+O+"_check").style.display="none")},children:g>1?Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(r.Fragment,{children:[0===O?Object(r.jsx)("div",{className:"Activity__action",id:x+O+"_minus",onClick:E,children:Object(r.jsx)(B.a,{})}):Object(r.jsx)(Y.a,{title:Object(r.jsxs)(r.Fragment,{children:["Update this task from"," ",Object(r.jsx)("b",{children:Object(r.jsx)("u",{children:"yesterday"})}),"?"]}),placement:"bottom",onConfirm:E,okText:"Yes",cancelText:"No",children:Object(r.jsx)("div",{className:"Activity__action",id:x+O+"_minus",children:Object(r.jsx)(B.a,{})})}),0===O?Object(r.jsx)("div",{className:"Activity__action",id:x+O+"_plus",onClick:N,children:Object(r.jsx)(A.a,{})}):Object(r.jsx)(Y.a,{title:Object(r.jsxs)(r.Fragment,{children:["Update this task from"," ",Object(r.jsx)("b",{children:Object(r.jsx)("u",{children:"yesterday"})}),"?"]}),placement:"bottom",onConfirm:N,okText:"Yes",cancelText:"No",children:Object(r.jsx)("div",{className:"Activity__action",id:x+O+"_plus",children:Object(r.jsx)(A.a,{})})})]})}):_?Object(r.jsx)(r.Fragment,{children:0===O?Object(r.jsx)("div",{className:"Activity__action",id:x+O+"_check",onClick:E,children:Object(r.jsx)(U.a,{})}):Object(r.jsx)(Y.a,{title:Object(r.jsxs)(r.Fragment,{children:["Update this task from"," ",Object(r.jsx)("b",{children:Object(r.jsx)("u",{children:"yesterday"})}),"?"]}),placement:"bottom",onConfirm:E,okText:"Yes",cancelText:"No",children:Object(r.jsx)("div",{className:"Activity__action",id:x+O+"_check",children:Object(r.jsx)(U.a,{})})})}):Object(r.jsx)(r.Fragment,{children:0===O?Object(r.jsx)("div",{className:"Activity__action",id:x+O+"_check",onClick:N,children:Object(r.jsx)(F.a,{})}):Object(r.jsx)(Y.a,{title:Object(r.jsxs)(r.Fragment,{children:["Update this task from"," ",Object(r.jsx)("b",{children:Object(r.jsx)("u",{children:"yesterday"})}),"?"]}),placement:"bottom",onConfirm:N,okText:"Yes",cancelText:"No",children:Object(r.jsx)("div",{className:"Activity__action",id:x+O+"_check",children:Object(r.jsx)(F.a,{})})})})}),Object(r.jsx)(T,{image:e.activity.activity}),Object(r.jsxs)("div",{className:"Activity__text }",children:[u?Object(r.jsx)(U.a,{style:{color:"#C70039"}}):a?Object(r.jsxs)(r.Fragment,{children:[g>1?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(D.a,{spin:!0,style:{color:"#999"}})," / ",g," "]}):Object(r.jsx)(D.a,{spin:!0,style:{color:"#999"}}),g>1&&e.activity.unit]}):Object(r.jsxs)(r.Fragment,{children:[g>1?"".concat(b," / ").concat(g," "):"".concat(e.activity.unit,"!"),g>1&&e.activity.unit]}),k&&Object(r.jsx)("div",{style:{fontStyle:"italic",fontSize:".7em"},children:Object(r.jsx)("i",{children:"optional"})})]})]})})}),G=(n(205),n(227)),H=n.n(G),J=(n(378),n(205)),q=J().tz("Europe/Berlin").format("YYYY"),V=J().tz("Europe/Berlin").format("MM"),K=J().tz("Europe/Berlin").format("DD"),Q=function(e){var t=parseInt(e,10),n=Math.floor(t/3600),r=Math.floor((t-3600*n)/60),c=t-3600*n-60*r;return n<10&&n>-10&&(n="0"+n),r<10&&r>-10&&(r="0"+r),c<10&&c>-10&&(c="0"+c),n+":"+r+":"+c},W=function(){var e=Math.floor(Date.now()/1e3),t=H()(q,V,K);return Math.floor(new Date(Date.UTC(t[0],t[1]-1,t[2],"00","00","00"))/1e3)-e-7200},X=function(){var e=Object(c.useState)(W()),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){setTimeout((function(){a(W())}),1e3)}),[n]),n<18e3?Object(r.jsx)("div",{className:n<7200?"countdown__alert":"",children:Q(n)}):"Today"},Z=(n(379),function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)([]),o=Object(i.a)(s,2),l=o[0],u=o[1],f=Object(c.useState)(!0),h=Object(i.a)(f,2),m=h[0],b=h[1],p=Object(c.useRef)(2),O=Object(c.useRef)(0),v=Object(c.useRef)(null),y=Object(c.useRef)(!1),g=Object(c.useRef)(!1),k=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r,c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([N(t+1),E()]);case 3:n=e.sent,r=Object(i.a)(n,2),c=r[0],s=r[1],a(c),u(s),t+1>c.length&&(y.current=!0,v.current=O.current+1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0.message),w.a.error({message:e.t0.message});case 16:b(!1);case 17:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),_=Object(c.useCallback)((function(e){e.preventDefault();var t=e.key.toLowerCase();if(!1===g.current){if(g.current=!0,"arrowdown"===t){if(v.current!==O.current-1){var n=O.current+1,r=document.getElementById("daily".concat(n)).getBoundingClientRect().top+window.scrollY;window.scrollTo({top:r,behavior:"smooth"})}if(!y.current){p.current++;var c=p.current;k(c)}}else if("arrowup"===t){if(O.current>0){var a=O.current-1,s=document.getElementById("daily".concat(a)).getBoundingClientRect().top+window.scrollY;window.scrollTo({top:s,behavior:"smooth"})}}else if("enter"===t){O.current=0;var o=document.getElementById("daily0").getBoundingClientRect().top+window.scrollY;window.scrollTo({top:o,behavior:"smooth"})}setTimeout((function(){g.current=!1}),500)}}),[]),T=Object(c.useCallback)((function(e){O.current=Math.round(window.scrollY/window.innerHeight),y.current||p.current===O.current+1&&(p.current=O.current+2,k(O.current+2))}),[]);Object(c.useEffect)((function(){k(p.current)}),[]),Object(c.useEffect)((function(){return document.addEventListener("keydown",_),document.addEventListener("scroll",T),function(){document.removeEventListener("keydown",_),document.removeEventListener("scroll",T)}}),[_,T]);for(var S=function(e){return l.map((function(t){return Object(r.jsx)(L,{activity:t,dailies:n[e],dayFromToday:e},t.activity)}))},I=[],P=0;P<p.current;P++)I.push(Object(r.jsxs)("div",{className:"Dailies__full",id:"daily".concat(P),children:[Object(r.jsx)("div",{className:"dailies__date",children:Object(r.jsxs)("div",{children:[0===P&&Object(r.jsx)(X,{}),1===P&&"Yesterday",P>1&&"".concat(n[P].day,".").concat(n[P].month,".").concat(n[P].year)]})}),Object(r.jsx)("div",{className:"dailies__main",children:S(P)})]},P));return m?Object(r.jsx)(x,{}):I}),$=n(460),ee=function(e){var t=e.condition,n=e.wrap,r=e.children;return t?n(r):r},te=Object(l.a)((function(e){return Object(r.jsx)(ee,{condition:!e.showProfil,wrap:function(e){return Object(r.jsx)(M.a,{placement:"left",title:"Edit profil",children:e})},children:e.showProfil?Object(r.jsx)("div",{className:"FloatButton__float",onClick:function(){return e.setShowProfil(!1)},children:Object(r.jsx)(U.a,{className:"FloatButton__close"})}):v.picUrl?Object(r.jsx)("div",{className:"FloatButton__float",style:{backgroundImage:"url(".concat(v.picUrl,")"),backgroundSize:"cover"},onClick:function(){return e.setShowProfil(!0)}}):Object(r.jsx)("div",{className:"FloatButton__float FloatButton__background",onClick:function(){return e.setShowProfil(!0)},children:Object(r.jsx)($.a,{className:"FloatButton__icon"})})})})),ne=function(){return Object(r.jsx)(M.a,{placement:"left",title:"Add sporatical task",children:Object(r.jsx)("div",{className:"FloatButton__float  FloatButton__background",children:Object(r.jsx)(A.a,{className:"FloatButton__icon"})})})},re=n(461),ce=function(){return Object(r.jsx)(M.a,{placement:"left",title:"Any obstacle?",children:Object(r.jsx)("div",{className:"FloatButton__float  FloatButton__background",children:Object(r.jsx)(re.a,{className:"FloatButton__icon"})})})},ae=(n(380),function(e){return Object(c.useEffect)((function(){k()}),[]),Object(r.jsxs)("div",{className:"Menu__floating",children:[Object(r.jsx)(te,{showProfil:e.showProfil,setShowProfil:e.setShowProfil}),Object(r.jsx)(ne,{}),Object(r.jsx)(ce,{})]})}),se=n(452),oe=n(453),ie=n(454),le=n(80),ue=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var r,c,a,s,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={email:t,password:n},e.next=3,fetch("https://routine-cvs.herokuapp.com/login",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}});case 3:if(!(200!==(c=e.sent).status&201!==c.status)){e.next=10;break}return e.next=7,c.json();case 7:throw a=e.sent,s=a.error,new Error(s);case 10:return e.next=12,c.json();case 12:return o=e.sent,e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),de=n(462),je=n(463),fe=n(235),he=n(236),me=(n(381),function(){var e=Object(c.useState)(!0),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!1),o=Object(i.a)(s,2),l=o[0],u=o[1],f=function(){var e=Object(j.a)(d.a.mark((function e(t){var r,c,a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(!0),r=t.email,c=t.password,a=t.remember,t.username,n){e.next=8;break}e.next=22;break;case 8:return e.prev=8,e.next=11,ue(r,c);case 11:s=e.sent,!0===a&&(localStorage.setItem("refreshToken",s.refreshToken),localStorage.setItem("userId",s.userId)),O.login(s.token,s.refreshToken),v.setUserId(s.userId),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(8),w.a.warn({message:e.t0.message}),console.log(e.t0);case 21:u(!1);case 22:case"end":return e.stop()}}),e,null,[[8,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"login__full",children:[Object(r.jsxs)("div",{className:"login__header",children:[Object(r.jsx)("img",{className:"login__logo",src:"https://routine-cvs.herokuapp.com/images/venja.svg",alt:"logo"}),"Venja.org"]}),Object(r.jsxs)(se.a,{name:"normal_login",className:"login__form",initialValues:{remember:!0},onFinish:f,children:[Object(r.jsx)(se.a.Item,{name:"username",hidden:n,rules:[{required:!n,message:"How should we call you?"}],children:Object(r.jsx)(oe.a,{prefix:Object(r.jsx)($.a,{className:"site-form-item-icon"}),placeholder:"Name"})}),Object(r.jsx)(se.a.Item,{name:"email",rules:[{type:"email",required:!0,message:"Please input your Email!"}],children:Object(r.jsx)(oe.a,{prefix:Object(r.jsx)(de.a,{className:"site-form-item-icon"}),placeholder:"Email"})}),Object(r.jsx)(se.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(r.jsx)(oe.a.Password,{prefix:Object(r.jsx)(je.a,{className:"site-form-item-icon"}),placeholder:"input Password",iconRender:function(e){return e?Object(r.jsx)(fe.a,{}):Object(r.jsx)(he.a,{})}})}),Object(r.jsxs)(se.a.Item,{hidden:!n,children:[Object(r.jsx)(se.a.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:Object(r.jsx)(ie.a,{children:Object(r.jsx)("span",{className:"login__remember",children:"Remember me"})})}),Object(r.jsx)("a",{className:"login__formforgot",href:"/#",children:"Recover password"})]}),Object(r.jsxs)(se.a.Item,{children:[Object(r.jsx)(le.a,{type:"primary",htmlType:"submit",className:"login__formbutton",children:l?Object(r.jsx)(D.a,{spin:!0}):n?"Log in":"Create account"}),Object(r.jsxs)("div",{className:"login__switchmode",children:["Or"," ",Object(r.jsx)("span",{className:"login__switchmodetext",onClick:function(){a(!n)},children:n?"register now!":"log into your account!"})]})]})]})]})});g.a.interceptors.request.use(function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!O.token){e.next=7;break}return e.next=4,O.token;case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,O.getNewToken();case 9:e.t0=e.sent;case 10:(n=e.t0)&&(t.headers=Object.assign({Authorization:"Bearer ".concat(n),"Content-Type":"application/json"})),e.next=17;break;case 14:e.prev=14,e.t1=e.catch(0),console.log(e.t1);case 17:return e.abrupt("return",t);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),(function(e){return console.log("Interceptor Error",e),Promise.reject(e)}));n(449);var be=function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))};window.addEventListener("resize",be);var pe=Object(l.a)((function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){O.refreshToken&&O.login(O.getNewToken(),O.refreshToken),be()}),[]),Object(r.jsx)("div",{className:"App",children:Object(r.jsx)("header",{className:"App__header",children:O.refreshToken?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ae,{showProfil:n,setShowProfil:a}),Object(r.jsx)("div",{className:"App__main",children:n?Object(r.jsx)(_,{}):Object(r.jsx)(Z,{})})]}):Object(r.jsx)(me,{})})})}));o.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(pe,{})}),document.getElementById("root"))}},[[450,1,2]]]);
//# sourceMappingURL=main.503b95e1.chunk.js.map