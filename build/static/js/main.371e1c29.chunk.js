(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{261:function(e,t){e.exports=function(e,t,n){var r=new Date(e,t-1,n,0,0,0,0),a=new Date(r.valueOf()+864e5);return[a.getFullYear(),a.getMonth()+1,a.getDate()]}},279:function(e,t,n){},297:function(e,t,n){},298:function(e,t,n){},299:function(e,t,n){},303:function(e,t,n){},304:function(e,t,n){},305:function(e,t,n){},309:function(e,t){},311:function(e,t){},325:function(e,t){},327:function(e,t){},355:function(e,t){},357:function(e,t){},358:function(e,t){},363:function(e,t){},365:function(e,t){},384:function(e,t){},396:function(e,t){},399:function(e,t){},416:function(e,t,n){},522:function(e,t,n){},523:function(e,t,n){},524:function(e,t,n){},525:function(e,t,n){},526:function(e,t,n){},527:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),c=n.n(a),s=n(33),i=n.n(s),o=(n(279),n(39)),l=n(9),u=n.n(l),d=n(19),j=n(21),b=n(31),m=n.n(b),h=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({url:"https://routine-cvs.herokuapp.com"+"/dailies/".concat(t),method:"GET"});case 2:if(!(200!==(n=e.sent).status&201!==n.status)){e.next=9;break}if(401!==n.status){e.next=8;break}throw new Error("Error! Unauthorized (401)");case 8:throw new Error("Error! Status ".concat(n.status));case 9:return e.next=11,n.data;case 11:return r=e.sent,e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({url:"https://routine-cvs.herokuapp.com/activity",method:"GET"});case 2:if(!(200!==(t=e.sent).status&201!==t.status)){e.next=9;break}if(401!==t.status){e.next=8;break}throw new Error("Error! Unauthorized (401)");case 8:throw new Error("Error! Status ".concat(t.status));case 9:return e.next=11,t.data;case 11:return n=e.sent,e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=n(26),O=(n(297),function(e){var t=!!e.invert,n=!!e.big;return Object(r.jsx)("div",{children:Object(r.jsx)("img",{className:"".concat(n?"logo__big":"logo"," ").concat(t&&"invert"),src:"https://routine-cvs.herokuapp.com"+"/images/".concat(e.image,".svg"),alt:e.image})})}),x=function(){var e=Object(d.a)(u.a.mark((function e(t,n,r){var a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({url:"https://routine-cvs.herokuapp.com"+"/streak/".concat(t,"/").concat(n,"/").concat(r),method:"GET"});case 2:if(!(200!==(a=e.sent).status&201!==a.status)){e.next=5;break}throw new Error("Error!");case 5:return e.next=7,a.data[0];case 7:return c=e.sent,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),v=n(10),_=n(7),g=new function e(){var t=this;Object(v.a)(this,e),this.today=null,this.dailyStreaks=null,this.setToday=function(e){t.today=e},this.setDailyStreaks=function(e){t.dailyStreaks=e},Object(_.m)(this,{today:_.n,setToday:_.f,dailyStreaks:_.n,setDailyStreaks:_.f})},y=(n(298),(new Date).getDate()),w=Object(o.a)((function(e){var t,n=Object(a.useState)(g.dailyStreaks),c=Object(j.a)(n,2),s=c[0],i=c[1],o=Object(a.useState)(!0),l=Object(j.a)(o,2),b=l[0],m=l[1],h=e.activity.name;t=void 0===e.float||e.float;var f=function(){var t=Object(d.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x(e.daily.year,e.daily.month,e.daily.day);case 3:r=t.sent,n&&(g.setToday(y),g.setDailyStreaks(r)),i(r),m(!1),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){null===s&&y===e.daily.day?f(!0):e.daily.day===g.today?(i(g.dailyStreaks),m(!1)):f(!1)}),[]);var p;return b?Object(r.jsx)("div",{className:"Streak__Float",children:"?"}):s[h]?Object(r.jsx)("div",{className:t?"Streak__Float":"Streak__Round",style:{backgroundColor:"rgba(214, 137, 16, ".concat((p=s[h],p<2?.1:p<3?.2:p<5?.3:p<8?.4:p<12?.5:p<20?.55:p<30?.6:p<40?.65:p<50?.7:p<60?.75:p<70?.8:p<80?.85:p<99?.9:1),")")},children:s[h]>999?"999+":s[h]}):Object(r.jsx)(r.Fragment,{})})),k=n(534),N=n(535),E=n(536),T=n(537),S=n(131),C=n(268),D=n(531),A=n(128),P=n(533),B=function(){var e=Object(d.a)(u.a.mark((function e(t,n,r){var a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(p.a)({},n,r),e.prev=1,e.next=4,m()({url:"https://routine-cvs.herokuapp.com"+"/dailies/".concat(t),method:"PATCH",data:a});case 4:if(200===(c=e.sent).status||201===c.status){e.next=7;break}throw new Error("Error!");case 7:return e.abrupt("return",{status:c.status,message:c.error});case 10:return e.prev=10,e.t0=e.catch(1),console.log(e.t0.message),e.abrupt("return",{status:500,message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),I=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m()({url:"https://routine-cvs.herokuapp.com"+"/streak/".concat(t),method:"PATCH"});case 3:if(200===(n=e.sent).status||201===n.status){e.next=6;break}throw new Error("Error!");case 6:return e.abrupt("return",{status:n.status,message:n.error});case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0.message),e.abrupt("return",{status:500,message:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();function F(e){return void 0===e||null===e?null:e.charAt(0).toUpperCase()+e.slice(1)}var U=function(e){var t=e.condition,n=e.wrap,r=e.children;return t?n(r):r},z=(n(299),function(e){var t,n=Object(a.useState)(!1),c=Object(j.a)(n,2),s=c[0],i=c[1],o=Object(a.useState)(!1),l=Object(j.a)(o,2),b=l[0],m=l[1],h=Object(a.useState)(!1),f=Object(j.a)(h,2),x=f[0],v=f[1],_=Object(a.useState)(window.innerWidth<900),g=Object(j.a)(_,2),y=g[0],z=g[1],Y=Object(a.useState)(e.dailies[e.activity.name]?e.dailies[e.activity.name]:0),R=Object(j.a)(Y,2),M=R[0],L=R[1],V=e.dayFromToday,G=e.dailies.id,H=e.activity.name,J=e.activity.increment,q=e.activity.goal,W=e.activity.optional;Object(a.useEffect)((function(){return K(),window.addEventListener("resize",K),function(){window.removeEventListener("resize",K)}}),[]);var K=function(){z(window.innerWidth<900)},Q=M>=q&&(!!q||M>q),X=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,r,a=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]&&a[0],i(!0),m(!1),n=M+J,e.next=6,B(G,H,n);case 6:if(r=e.sent,!t){e.next=10;break}return e.next=10,I(H);case 10:200===r.status?(L(n),i(!1)):(C.a.error({message:r.message}),m(!0));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,r,a=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]&&a[0],i(!0),m(!1),n=M>=J?M-J:0,e.next=6,B(G,H,n);case 6:if(r=e.sent,!t){e.next=10;break}return e.next=10,I(H);case 10:200===r.status?(L(n),i(!1)):(C.a.error({message:r.message}),m(!0));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(D.a,(t={title:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("span",{className:"Drawer__title",children:F(e.activity.name)}),e.activity.desc,Object(r.jsx)(w,{activity:e.activity,daily:e.dailies,float:!1})]}),placement:"right",closable:!0,visible:x,onClose:function(){return v(!1)}},Object(p.a)(t,"placement","bottom"),Object(p.a)(t,"children",q>1?Object(r.jsxs)("div",{className:"Activity__fullDrawerButton",children:[Object(r.jsx)("div",{className:"Activity__drawerButton Activity__drawerActionButton",style:{fontSize:"5em"},id:H+V+"_minus",onClick:Z,children:Object(r.jsx)(k.a,{})}),Object(r.jsxs)("div",{className:"Activity__drawerButton",style:{fontSize:"2em"},children:[s?Object(r.jsx)(N.a,{spin:!0,style:{color:"#999"}}):Object(r.jsx)("span",{className:M<q?"":"gold",children:M}),Object(r.jsxs)("span",{className:"transparentWhite",children:["\xa0/ ",q]})]}),Object(r.jsx)("div",{className:"Activity__drawerButton Activity__drawerActionButton",style:{fontSize:"5em"},id:H+V+"_plus",onClick:X,children:Object(r.jsx)(E.a,{})})]}):Q?Object(r.jsx)("div",{className:"Activity__fullDrawerButton Activity__drawerActionButton",style:{fontSize:"7em"},id:H+V+"_check",onClick:Z,children:Object(r.jsx)(S.a,{})}):Object(r.jsx)("div",{className:"Activity__fullDrawerButton Activity__drawerActionButton",style:{fontSize:"7em"},id:H+V+"_check",onClick:X,children:Object(r.jsx)(T.a,{})})),t)),Object(r.jsx)(U,{condition:!y,wrap:function(t){return Object(r.jsx)(A.a,{placement:"top",title:Object(r.jsxs)(r.Fragment,{children:[e.activity.desc," ",Object(r.jsx)(w,{activity:e.activity,daily:e.dailies})]}),children:t})},children:Object(r.jsxs)("div",{className:"Activity__item",children:[W&&!Q&&Object(r.jsx)("div",{className:"Activity__optional"}),Q&&Object(r.jsx)("div",{className:"Activity__doneContainer",children:Object(r.jsx)("div",{className:"Activity__done",children:Object(r.jsx)(T.a,{})})}),y?0===V?Object(r.jsx)("div",{className:"Activity__actionContainer",onClick:function(){return v(!0)}}):1===V&&Object(r.jsx)(P.a,{title:Object(r.jsxs)(r.Fragment,{children:["Update this task from"," ",Object(r.jsx)("b",{children:Object(r.jsx)("u",{children:"yesterday"})}),"?"]}),placement:"bottom",onConfirm:function(){return v(!0)},okText:"Yes",cancelText:"No",children:Object(r.jsx)("div",{className:"Activity__actionContainer"})}):Object(r.jsx)("div",{className:"Activity__actionContainer ".concat(0===q?"":"Activity__actionContainerHover"),onMouseOver:function(){V<2&&(q>1?(document.getElementById(H+V+"_minus").style.display="block",document.getElementById(H+V+"_plus").style.display="block"):document.getElementById(H+V+"_check").style.display="block")},onMouseLeave:function(){V<2&&(q>1?(document.getElementById(H+V+"_minus").style.display="none",document.getElementById(H+V+"_plus").style.display="none"):document.getElementById(H+V+"_check").style.display="none")},children:q>1?Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(r.Fragment,{children:[0===V?Object(r.jsx)("div",{className:"Activity__action",id:H+V+"_minus",onClick:Z,children:Object(r.jsx)(k.a,{})}):Object(r.jsx)(P.a,{title:Object(r.jsxs)(r.Fragment,{children:["Update this task from"," ",Object(r.jsx)("b",{children:Object(r.jsx)("u",{children:"yesterday"})}),"?"]}),placement:"bottom",onConfirm:Z,okText:"Yes",cancelText:"No",children:Object(r.jsx)("div",{className:"Activity__action",id:H+V+"_minus",children:Object(r.jsx)(k.a,{})})}),0===V?Object(r.jsx)("div",{className:"Activity__action",id:H+V+"_plus",onClick:X,children:Object(r.jsx)(E.a,{})}):Object(r.jsx)(P.a,{title:Object(r.jsxs)(r.Fragment,{children:["Update this task from"," ",Object(r.jsx)("b",{children:Object(r.jsx)("u",{children:"yesterday"})}),"?"]}),placement:"bottom",onConfirm:function(){return X(!0)},okText:"Yes",cancelText:"No",children:Object(r.jsx)("div",{className:"Activity__action",id:H+V+"_plus",children:Object(r.jsx)(E.a,{})})})]})}):Q?Object(r.jsx)(r.Fragment,{children:0===V?Object(r.jsx)("div",{className:"Activity__action",id:H+V+"_check",onClick:Z,children:Object(r.jsx)(S.a,{})}):Object(r.jsx)(P.a,{title:Object(r.jsxs)(r.Fragment,{children:["Update this task from"," ",Object(r.jsx)("b",{children:Object(r.jsx)("u",{children:"yesterday"})}),"?"]}),placement:"bottom",onConfirm:Z,okText:"Yes",cancelText:"No",children:Object(r.jsx)("div",{className:"Activity__action",id:H+V+"_check",children:Object(r.jsx)(S.a,{})})})}):Object(r.jsx)(r.Fragment,{children:0===V?Object(r.jsx)("div",{className:"Activity__action",id:H+V+"_check",onClick:X,children:Object(r.jsx)(T.a,{})}):Object(r.jsx)(P.a,{title:Object(r.jsxs)(r.Fragment,{children:["Update this task from"," ",Object(r.jsx)("b",{children:Object(r.jsx)("u",{children:"yesterday"})}),"?"]}),placement:"bottom",onConfirm:function(){return X(!0)},okText:"Yes",cancelText:"No",children:Object(r.jsx)("div",{className:"Activity__action",id:H+V+"_check",children:Object(r.jsx)(T.a,{})})})})}),Object(r.jsx)(O,{image:e.activity.icon}),Object(r.jsxs)("div",{className:"Activity__text",children:[b?Object(r.jsx)(S.a,{style:{color:"#C70039"}}):s?Object(r.jsxs)(r.Fragment,{children:[q>1?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(N.a,{spin:!0,style:{color:"#999"}})," / ",q," "]}):Object(r.jsx)(N.a,{spin:!0,style:{color:"#999"}}),q>1&&e.activity.unit]}):Object(r.jsxs)(r.Fragment,{children:[q>1?"".concat(M," / ").concat(q," "):"".concat(e.activity.unit,"!"),q>1&&e.activity.unit]}),W&&Object(r.jsx)("div",{style:{fontStyle:"italic",fontSize:".7em"},children:Object(r.jsx)("i",{children:"optional"})})]})]})})]})}),Y=(n(178),n(261)),R=n.n(Y),M=(n(303),n(178)),L=M().tz("Europe/Berlin").format("YYYY"),V=M().tz("Europe/Berlin").format("MM"),G=M().tz("Europe/Berlin").format("DD"),H=function(e){var t=parseInt(e,10),n=Math.floor(t/3600),r=Math.floor((t-3600*n)/60),a=t-3600*n-60*r;return n<10&&n>-10&&(n="0"+n),r<10&&r>-10&&(r="0"+r),a<10&&a>-10&&(a="0"+a),n+":"+r+":"+a},J=function(){var e=Math.floor(Date.now()/1e3),t=R()(L,V,G);return Math.floor(new Date(Date.UTC(t[0],t[1]-1,t[2],"00","00","00"))/1e3)-e-7200},q=function(){var e=Object(a.useState)(J()),t=Object(j.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){setTimeout((function(){c(J())}),1e3)}),[n]),n<0?Object(r.jsx)("div",{className:n<7200?"countdown__alert":"",children:"00:00:00"}):n<18e3?Object(r.jsx)("div",{className:n<7200?"countdown__alert":"",children:H(n)}):"Today"},W=(n(304),function(){return Object(r.jsxs)("div",{className:"spinner",children:[Object(r.jsx)("img",{src:"https://routine-cvs.herokuapp.com/images/venja.svg",className:"loader",alt:"Loading"}),Object(r.jsxs)("div",{className:"spinner spinner__header",children:["venja",Object(r.jsx)("span",{style:{color:"#D68910"},children:".org"})]})]})}),K=(n(305),function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)([]),i=Object(j.a)(s,2),o=i[0],l=i[1],b=Object(a.useState)(!0),m=Object(j.a)(b,2),p=m[0],O=m[1],x=Object(a.useRef)(2),v=Object(a.useRef)(0),_=Object(a.useRef)(null),g=Object(a.useRef)(!1),y=Object(a.useRef)(!1),w=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([h(t+1),f()]);case 3:n=e.sent,r=Object(j.a)(n,2),a=r[0],s=r[1],c(a),l(s),t+1>a.length&&(g.current=!0,_.current=v.current+1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0.message);case 15:O(!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),k=Object(a.useCallback)((function(e){e.preventDefault();var t=e.key.toLowerCase();if(!1===y.current){if(y.current=!0,"arrowdown"===t){if(_.current!==v.current-1){var n=v.current+1,r=document.getElementById("daily".concat(n)).getBoundingClientRect().top+window.scrollY;window.scrollTo({top:r,behavior:"smooth"})}if(!g.current){x.current++;var a=x.current;w(a)}}else if("arrowup"===t){if(v.current>0){var c=v.current-1,s=document.getElementById("daily".concat(c)).getBoundingClientRect().top+window.scrollY;window.scrollTo({top:s,behavior:"smooth"})}}else if("enter"===t){v.current=0;var i=document.getElementById("daily0").getBoundingClientRect().top+window.scrollY;window.scrollTo({top:i,behavior:"smooth"})}setTimeout((function(){y.current=!1}),500)}}),[]),N=Object(a.useCallback)((function(e){v.current=Math.round(window.scrollY/window.innerHeight),g.current||x.current===v.current+1&&(x.current=v.current+2,w(v.current+2))}),[]);Object(a.useEffect)((function(){w(x.current)}),[]),Object(a.useEffect)((function(){return document.addEventListener("keydown",k),document.addEventListener("scroll",N),function(){document.removeEventListener("keydown",k),document.removeEventListener("scroll",N)}}),[k,N]);for(var E=function(e){return o.map((function(t){return Object(r.jsx)(z,{activity:t,dailies:n[e],dayFromToday:e},t.name)}))},T=[],S=0;S<x.current;S++)T.push(Object(r.jsxs)("div",{className:"Dailies__full",id:"daily".concat(S),children:[Object(r.jsxs)("div",{className:"dailies__date",children:[0===S&&Object(r.jsx)(q,{}),1===S&&"Yesterday",S>1&&"".concat(n[S].day,".").concat(n[S].month,".").concat(n[S].year)]}),Object(r.jsx)("div",{className:"dailies__main",children:E(S)})]},"daily".concat(S)));return p?Object(r.jsx)(W,{}):T}),Q=n(94),X=n(16),Z=n(95),$=n.n(Z),ee=new(function(){function e(){var t=this;Object(v.a)(this,e),this.token=null,this.refreshToken=localStorage.getItem("refreshToken")||null,this.login=function(e,n){t.token=e,t.refreshToken=n},this.logout=function(){localStorage.removeItem("refreshToken"),localStorage.removeItem("userId"),localStorage.removeItem("user"),localStorage.clear();var e={refreshToken:t.refreshToken};t.token=null,t.refreshToken=null,fetch("https://routine-cvs.herokuapp.com/logout",{method:"DELETE",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){if(204!==e.status)throw new Error("Error on logout!")})).catch((function(e){console.log(e)}))},this.getNewToken=function(){var e=localStorage.getItem("refreshToken");if(e)try{$.a.decode(e,{complete:!0}),t.refreshToken=e}catch(r){r instanceof Z.TokenExpiredError?(console.log("refreshtoken is expired",r),t.logout()):console.log("unknown error:",r)}if(null!==t.token)try{return $.a.decode(t.token,{complete:!0}),t.token}catch(r){r instanceof Z.TokenExpiredError?(console.log("token is expired",r),t.logout()):console.log("unknown error:",r)}if(t.refreshToken){var n={refreshToken:t.refreshToken};return fetch("https://routine-cvs.herokuapp.com/token",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){if(201!==e.status)throw t.logout(),new Error("Error when refreshing the token!");return e.json()})).then((function(e){if(localStorage.setItem("refreshToken",e.refreshToken),e.token)return t.login(e.token,e.refreshToken),t.token=e.token,e.token})).catch((function(e){console.log(e)}))}},Object(_.m)(this,{_token:_.n,refreshToken:_.n,login:_.f,logout:_.f,getNewToken:_.f})}return Object(X.a)(e,[{key:"token",get:function(){return this._token},set:function(e){this._token=e}}]),e}()),te=new function e(){var t=this;Object(v.a)(this,e),this.userId=localStorage.getItem("userId")||null,this.userActivities=null,this.userName=null,this.picUrl=null,this.setUserId=function(e){t.userId=e},this.setUserActivities=function(e){t.userActivities=e},this.setUserName=function(e){t.userName=e},this.setPicUrl=function(e){t.picUrl=e},Object(_.m)(this,{userId:_.n,setUserId:_.f,userActivities:_.n,setUserActivities:_.f,userName:_.n,setUserName:_.f,picUrl:_.n,setPicUrl:_.f})},ne=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({url:"https://routine-cvs.herokuapp.com/user",method:"GET"});case 2:if(!(200!==(t=e.sent).status&201!==t.status)){e.next=9;break}if(401!==t.status){e.next=8;break}throw new Error("Error! Unauthorized(401)");case 8:throw new Error("Error! Status ".concat(t.status));case 9:return e.next=11,t.data[0];case 11:return n=e.sent,te.setUserActivities(n.activities),te.setUserName(n.name),te.setPicUrl(n.picurl),e.abrupt("return",n);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({url:"https://routine-cvs.herokuapp.com/activity/list",method:"GET"});case 2:if(!(200!==(t=e.sent).status&201!==t.status)){e.next=9;break}if(401!==t.status){e.next=8;break}throw new Error("Error! Unauthorized(401)");case 8:throw new Error("Error! Status ".concat(t.status));case 9:return e.next=11,t.data.map((function(e){return e}));case 11:return n=e.sent,e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=n(538),ce=(n(416),Object(o.a)((function(){var e=Object(a.useState)(!0),t=Object(j.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)([]),i=Object(j.a)(s,2),o=i[0],l=i[1],b=Object(a.useState)([]),m=Object(j.a)(b,2),h=m[0],f=m[1],p=Object(a.useState)(!1),x=Object(j.a)(p,2),v=x[0],_=x[1],g=Object(a.useState)(null),y=Object(j.a)(g,2),w=y[0],k=y[1],N=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,r,a,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([ne(),re()]);case 3:return t=e.sent,n=Object(j.a)(t,2),r=n[0],a=n[1],e.next=9,r.activities.map((function(e){return e.name}));case 9:s=e.sent,i=a.filter((function(e){return!s.includes(e.name)})),l(r.activities),f(i),c(!1),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){N()}),[]);var E=function(e){_(!0),k(e)},T=function(e){var t=te.userActivities,n=t.find((function(e){return e.id===w.id}));n&&(n[e.target.name]=e.target.value),l(t)},S=o.map((function(e,t){return Object(r.jsxs)("div",{className:"Profil__activities",onClick:function(){return E(e)},children:[Object(r.jsx)(O,{image:e.icon}),e.name]},"admin_activities_".concat(t))})),C=h.map((function(e,t){return Object(r.jsx)("div",{className:"Profil__activities",onClick:function(){return E(e)},children:Object(r.jsx)(O,{image:e.icon})},"add_activities_".concat(t))}));return n?Object(r.jsx)(W,{}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(D.a,{title:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("span",{className:"Drawer__title",children:F(null===w||void 0===w?void 0:w.name)}),null===w||void 0===w?void 0:w.desc]}),closable:!0,visible:v,onClose:function(){_(!1),k(null)},placement:"bottom",children:null!==w&&Object(r.jsxs)("div",{className:"Drawer",children:[Object(r.jsxs)("div",{className:"Drawer__main",children:[Object(r.jsx)(O,{image:w.icon,invert:!1,big:!0}),Object(r.jsxs)("div",{className:"Drawer__editableContainer",children:[Object(r.jsxs)("div",{className:"Drawer__editable",children:[Object(r.jsx)("span",{className:"Drawer__editableTitle",children:"Name"}),Object(r.jsx)("input",{className:"Drawer__inputText",type:"text",id:"name",name:"name",defaultValue:w.name,min:"1",onChange:T})]}),Object(r.jsxs)("div",{className:"Drawer__editable",children:[Object(r.jsx)("span",{className:"Drawer__editableTitle",children:"Description"}),Object(r.jsx)("input",{className:"Drawer__inputText",type:"text",id:"desc",name:"desc",defaultValue:w.desc,min:"1",onChange:T})]}),Object(r.jsxs)("div",{className:"Drawer__editable",children:[Object(r.jsx)("span",{className:"Drawer__editableTitle",children:"Goal"}),Object(r.jsx)("input",{className:"Drawer__inputNumber",type:"number",id:"goal",name:"goal",defaultValue:w.goal,min:"1",onChange:T})]}),Object(r.jsxs)("div",{className:"Drawer__editable",children:[Object(r.jsx)("span",{className:"Drawer__editableTitle",children:"Increment"}),Object(r.jsx)("input",{className:"Drawer__inputNumber",type:"number",id:"increment",name:"increment",defaultValue:w.increment,min:"1",onChange:T})]}),Object(r.jsxs)("div",{className:"Drawer__editable",children:[Object(r.jsx)("span",{className:"Drawer__editableTitle",children:"Sorting"}),Object(r.jsx)("input",{className:"Drawer__inputNumber",type:"number",id:"sorting",name:"sorting",defaultValue:w.sorting,min:"1",onChange:T})]}),Object(r.jsxs)("div",{className:"Drawer__editable",children:[Object(r.jsx)("span",{className:"Drawer__editableTitle",children:"Unit"}),Object(r.jsx)("input",{className:"Drawer__inputText",type:"text",id:"unit",name:"unit",defaultValue:w.unit,min:"1",onChange:T})]}),Object(r.jsxs)("div",{className:"Drawer__editable",children:[Object(r.jsx)("span",{className:"Drawer__editableTitle",children:"Optional"}),w.optional?"Yes":"No"]}),Object(r.jsxs)("div",{className:"Drawer__editable",children:[Object(r.jsx)("span",{className:"Drawer__editableTitle",children:"Daily"}),w.daily?"Yes":"No"]})]})]}),Object(r.jsx)("div",{className:"Drawer__buttonContainer",children:Object(r.jsx)(Q.a,{icon:Object(r.jsx)(ae.a,{}),onClick:function(){return e=w.id,void console.log("Delete this",e);var e},type:"primary",danger:!0,disabled:!0,children:"Delete"})})]})}),Object(r.jsxs)("div",{className:"Profil__full",children:[Object(r.jsx)("div",{className:"Profil__avatar",style:{backgroundImage:"url(".concat(te.picUrl,")"),backgroundSize:"cover"}}),Object(r.jsxs)("div",{className:"Profil__main",children:[Object(r.jsxs)("div",{children:["hello ",te.userName,","]}),Object(r.jsx)("div",{className:"Profil__logout",onClick:function(){return ee.logout()},children:"(logout)"}),Object(r.jsxs)("div",{className:"Profil__container",children:[Object(r.jsx)("div",{className:"Profil__containerTitle",children:"Manage activity"}),Object(r.jsx)("div",{children:S})]}),Object(r.jsxs)("div",{className:"Profil__container",children:[Object(r.jsx)("div",{className:"Profil__containerTitle",children:"Add activity"}),Object(r.jsx)("div",{children:C})]})]})]})]})}))),se=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({url:"https://routine-cvs.herokuapp.com/stats/",method:"GET"});case 2:if(!(200!==(n=e.sent).status&201!==n.status)){e.next=9;break}if(401!==n.status){e.next=8;break}throw new Error("Error! Unauthorized");case 8:throw new Error("Error! Status ".concat(n.status));case 9:return e.next=11,n.data;case 11:return r=e.sent,e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=n(266),oe=(n(522),Object(o.a)((function(){var e=Object(a.useState)(!0),t=Object(j.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)([]),i=Object(j.a)(s,2),o=i[0],l=i[1],b=Object(a.useRef)([0,1,2,3,4,5,6,7,8,9]),m=[],h=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,se();case 3:t=e.sent,n=t.map((function(e){return"".concat(e.day,".").concat(e.month,".").concat(e.year)})),l(n),te.userActivities.map((function(e){e.name;m.push(e.name)})),console.log(b.current),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message);case 13:c(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){h()}),[]);var f={labels:o,datasets:[{label:"Run",backgroundColor:"rgba(214, 137, 16, 0.95)",borderColor:"rgba(214, 137, 16, 1)",data:b.current}]};return n?Object(r.jsx)(W,{}):Object(r.jsxs)("div",{className:"Stats__full",children:[Object(r.jsx)("div",{className:"Stats__title",children:"Statistics"}),Object(r.jsx)("div",{className:"Stats__main",children:Object(r.jsx)(ie.a,{data:f})})]})}))),le=n(529),ue=n(530),de=n(532),je=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r,a,c,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={email:t,password:n},e.next=3,fetch("https://routine-cvs.herokuapp.com/login",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}});case 3:if(!(200!==(a=e.sent).status&201!==a.status)){e.next=10;break}return e.next=7,a.json();case 7:throw c=e.sent,s=c.error,new Error(s);case 10:return e.next=12,a.json();case 12:return i=e.sent,e.abrupt("return",i);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),be=n(539),me=n(540),he=n(541),fe=n(272),pe=n(273),Oe=(n(523),function(){var e=Object(a.useState)(!0),t=Object(j.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(!1),i=Object(j.a)(s,2),o=i[0],l=i[1],b=function(){var e=Object(d.a)(u.a.mark((function e(t){var r,a,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(!0),r=t.email,a=t.password,c=t.remember,t.username,n){e.next=8;break}e.next=22;break;case 8:return e.prev=8,e.next=11,je(r,a);case 11:s=e.sent,!0===c&&(localStorage.setItem("refreshToken",s.refreshToken),localStorage.setItem("userId",s.userId)),ee.login(s.token,s.refreshToken),te.setUserId(s.userId),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(8),C.a.warn({message:e.t0.message}),console.log(e.t0);case 21:l(!1);case 22:case"end":return e.stop()}}),e,null,[[8,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"login__full",children:[Object(r.jsxs)("div",{className:"login__header",children:[Object(r.jsx)("img",{className:"login__logo",src:"https://routine-cvs.herokuapp.com/images/venja.svg",alt:"logo"}),"Venja.org"]}),Object(r.jsxs)(le.a,{name:"normal_login",className:"login__form",initialValues:{remember:!0},onFinish:b,children:[Object(r.jsx)(le.a.Item,{name:"username",hidden:n,rules:[{required:!n,message:"How should we call you?"}],children:Object(r.jsx)(ue.a,{prefix:Object(r.jsx)(be.a,{className:"site-form-item-icon"}),placeholder:"Name"})}),Object(r.jsx)(le.a.Item,{name:"email",rules:[{type:"email",required:!0,message:"Please input your Email!"}],children:Object(r.jsx)(ue.a,{prefix:Object(r.jsx)(me.a,{className:"site-form-item-icon"}),placeholder:"Email"})}),Object(r.jsx)(le.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(r.jsx)(ue.a.Password,{prefix:Object(r.jsx)(he.a,{className:"site-form-item-icon"}),placeholder:"input Password",iconRender:function(e){return e?Object(r.jsx)(fe.a,{}):Object(r.jsx)(pe.a,{})}})}),Object(r.jsxs)(le.a.Item,{hidden:!n,children:[Object(r.jsx)(le.a.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:Object(r.jsx)(de.a,{children:Object(r.jsx)("span",{className:"login__remember",children:"Remember me"})})}),Object(r.jsx)("a",{className:"login__formforgot",href:"/#",children:"Recover password"})]}),Object(r.jsxs)(le.a.Item,{children:[Object(r.jsx)(Q.a,{type:"primary",htmlType:"submit",className:"login__formbutton",children:o?Object(r.jsx)(N.a,{spin:!0}):n?"Log in":"Create account"}),Object(r.jsxs)("div",{className:"login__switchmode",children:["Or"," ",Object(r.jsx)("span",{className:"login__switchmodetext",onClick:function(){c(!n)},children:n?"register now!":"log into your account!"})]})]})]})]})}),xe=new function e(){var t=this;Object(v.a)(this,e),this.showPage="daily",this.setShowPage=function(e){t.showPage=e},Object(_.m)(this,{showPage:_.n,setShowPage:_.f})},ve=Object(o.a)((function(e){return Object(r.jsx)(U,{condition:"profil"!==xe.showPage,wrap:function(e){return Object(r.jsx)(A.a,{placement:"left",title:"Edit profil",children:e})},children:"profil"===xe.showPage?"":te.picUrl?Object(r.jsx)("div",{className:"FloatButton__float",style:{backgroundImage:"url(".concat(te.picUrl,")"),backgroundSize:"cover"},onClick:function(){return xe.setShowPage("profil")}}):Object(r.jsx)("div",{className:"FloatButton__float FloatButton__background",onClick:function(){return xe.setShowPage("profil")},children:Object(r.jsx)(be.a,{className:"FloatButton__icon"})})})})),_e=function(){return Object(r.jsx)(A.a,{placement:"left",title:"Add sporatical task",children:Object(r.jsx)("div",{className:"FloatButton__float  FloatButton__background",children:Object(r.jsx)(E.a,{className:"FloatButton__icon"})})})},ge=n(542),ye=function(){return Object(r.jsx)(A.a,{placement:"left",title:"Any obstacle?",children:Object(r.jsx)("div",{className:"FloatButton__float  FloatButton__background",children:Object(r.jsx)(ge.a,{className:"FloatButton__icon"})})})},we=(n(524),Object(o.a)((function(){return Object(r.jsx)(U,{condition:"stats"!==xe.showPage,wrap:function(e){return Object(r.jsx)(A.a,{placement:"left",title:"Show statistics",children:e})},children:"stats"===xe.showPage?"":Object(r.jsx)("div",{className:"FloatButton__float  FloatButton__background",onClick:function(){return xe.setShowPage("stats")},children:Object(r.jsx)("img",{className:"StatsButton__logo",src:"https://routine-cvs.herokuapp.com/images/stats.svg",alt:"stats"})})})}))),ke=Object(o.a)((function(){return"daily"!==xe.showPage&&Object(r.jsx)("div",{className:"FloatButton__float",onClick:function(){return xe.setShowPage("daily")},children:Object(r.jsx)(S.a,{className:"FloatButton__close"})})})),Ne=(n(525),function(e){return Object(a.useEffect)((function(){ne()}),[]),Object(r.jsxs)("div",{className:"Menu__floating",children:[Object(r.jsx)(ke,{}),Object(r.jsx)(ve,{}),Object(r.jsx)(we,{}),Object(r.jsx)(_e,{}),Object(r.jsx)(ye,{})]})});m.a.interceptors.request.use(function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!ee.token){e.next=7;break}return e.next=4,ee.token;case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,ee.getNewToken();case 9:e.t0=e.sent;case 10:(n=e.t0)&&(t.headers=Object.assign({Authorization:"Bearer ".concat(n),"Content-Type":"application/json"})),e.next=17;break;case 14:e.prev=14,e.t1=e.catch(0),console.log(e.t1);case 17:return e.abrupt("return",t);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),(function(e){return console.log("Interceptor Error",e),Promise.reject(e)}));n(526);var Ee=function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))};window.addEventListener("resize",Ee);var Te=Object(o.a)((function(){return Object(a.useEffect)((function(){ee.refreshToken&&function(){try{ee.getNewToken()}catch(e){console.log(e)}}(),ne(),Ee()}),[]),Object(r.jsx)("div",{className:"App",children:Object(r.jsx)("header",{className:"App__header",children:ee.refreshToken?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Ne,{}),Object(r.jsxs)("div",{className:"App__main",children:["daily"===xe.showPage&&Object(r.jsx)(K,{}),"profil"===xe.showPage&&Object(r.jsx)(ce,{}),"stats"===xe.showPage&&Object(r.jsx)(oe,{})]})]}):Object(r.jsx)(Oe,{})})})}));i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(Te,{})}),document.getElementById("root"))}},[[527,1,2]]]);
//# sourceMappingURL=main.371e1c29.chunk.js.map